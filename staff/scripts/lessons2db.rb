#!../bin/rails runner 
#
#run this script with:
#bin/rails runner path/to/filename.rb
#
#
#
reference1 = "13407 26 Απριλίου 2017 ΤΕΥΧΟΣ ΔΕΥΤΕΡΟ Αρ. Φύλλου 1427"
reference2 = "18211 2 Ιουνίου 2016 ΤΕΥΧΟΣ ΔΕΥΤΕΡΟ Αρ. Φύλλου 1567"
reference3 = "13367 26 Απριλίου 2017 ΤΕΥΧΟΣ ΔΕΥΤΕΡΟ Αρ. Φύλλου 1426" 
reference4 = "20773 15 Ιουνίου 2017 ΤΕΥΧΟΣ ΔΕΥΤΕΡΟ Αρ. Φύλλου 2072" 
puts "Lesson Types have to be entered manually (Θ Θεωρητικό, Ε Εργαστηριακό)"
puts "Hit enter to continue"
gets

def create_abbr( string )
  return string if string.length<8
  a = string.split
  abbr = ""
  a.each do |s|
    abbr += s[0..3]
  end
  return abbr[0..7] if abbr.length>8
  return string[0..7] if abbr.length<8
  abbr
end

lessons = [
  ["ΑΕ", "Αγωγή Υγείας", 2, "Θ",reference1],
  ["ΑΕ", "Αρχές Γραμμικού και Αρχιτεκτονικού Σχεδίου", 2, "Θ",reference1],
  ["ΑΕ", "Αρχές Ηλεκτρολογίας και Ηλεκτρονικής", 2, "Θ",reference1],
  ["ΑΕ", "Αρχές Μηχανολογίας", 2, "Θ",reference1],
  ["ΑΕ", "Αρχές Οικονομίας", 2, "Θ",reference1],
  ["ΑΕ", "Βασικές Αρχές Σύνθεσης", 2, "Θ",reference1],
  ["ΑΕ", "Γεωπονία και Αειφόρος Ανάπτυξη", 2, "Θ",reference1],
  ["ΑΕ", "Ναυτική Τέχνη", 2, "Θ",reference1],
  ["ΒΗ", "Ηλεκτροτεχνία (Κυκλώματα Συνεχούς και Εναλλασσόμενου Ρεύματος)", 2, "Θ",reference1],
  ["ΒΗ", "Ηλεκτροτεχνία (Κυκλώματα Συνεχούς και Εναλλασσόμενου Ρεύματος)", 2, "Ε",reference1],
  ["ΒΗ", "Εσωτερικές Ηλεκτρικές Εγκαταστάσεις και Ηλεκτρολογικό Σχέδιο", 2, "Θ",reference1],
  ["ΒΗ", "Εσωτερικές Ηλεκτρικές Εγκαταστάσεις και Ηλεκτρολογικό Σχέδιο", 5, "Ε",reference1],
  ["ΒΗ", "Εισαγωγή στα Υπολογιστικά Συστήματα και στα Δίκτυα Επικοινωνιών", 3, "Ε",reference1],
  ["ΒΗ", "Αυτοματισμοί-Αισθητήρες", 2, "Ε",reference1],
  ["ΒΗ", "Αναλογικά και Ψηφιακά Ηλεκτρονικά", 2, "Θ",reference1],
  ["ΒΗ", "Αναλογικά και Ψηφιακά Ηλεκτρονικά", 4, "Ε",reference1],
  ["ΒΗ", "Αγγλικά Τομέα", 1, "Θ",reference1],
  ["Α", "Νέα Ελληνικά", 4, "Θ",reference2],
  ["Α", "Άλγεβρα", 3, "Θ",reference2],
  ["Α", "Γεωμετρία", 1, "Θ",reference2],
  ["Α", "Φυσική", 2, "Θ",reference2],
  ["Α", "Χημεία", 1, "Θ",reference2],
  ["Α", "Βιολογία", 1, "Θ",reference2],
  ["Α", "Πολιτική Παιδεία", 2, "Θ",reference2],
  ["Α", "Ιστορία", 1, "Θ",reference2],
  ["Α", "Θρησκευτικά", 1, "Θ",reference2],
  ["Α", "Αγγλικά", 2, "Θ",reference2],
  ["Α", "Φυσική Αγωγή", 2, "Θ",reference2],
  ["Α", "Πληροφορική", 2, "Θ",reference2],
  ["Α", "Ερευνητική Εργασία στην Τεχνολογία", 2, "Θ",reference2],
  ["Α", "Σχολικός Επαγγελματικός Προσανατολισμός", 2, "Θ",reference2],
  ["Α", "Ζώνη Δημιουργικών Δραστηριοτήτων", 3, "Θ",reference2],
  ["Β", "Νέα Ελληνικά", 3, "Θ",reference2],
  ["Β", "Άλγεβρα", 2, "Θ",reference2],
  ["Β", "Γεωμετρία", 1, "Θ",reference2],
  ["Β", "Φυσική", 1, "Θ",reference2],
  ["Β", "Χημεία", 1, "Θ",reference2],
  ["Β", "Θρησκευτικά", 1, "Θ",reference2],
  ["Β", "Αγγλικά", 1, "Θ",reference2],
  ["Β", "Φυσική Αγωγή", 1, "Θ",reference2],
  ["Β", "Εισαγωγή στις Αρχές της Επιστήμης των Η/Υ", 1, "Θ",reference2],
  ["ΒΓ", "Αρχές Αγροτικής Ανάπτυξης", 2, "Θ",reference2],
  ["ΒΓ", "Περιβάλλον και Γεωργία", 1, "Θ",reference2],
  ["ΒΓ", "Περιβάλλον και Γεωργία", 2, "Ε",reference2],
  ["ΒΓ", "Φυτική Παραγωγή", 2, "Θ",reference2],
  ["ΒΓ", "Φυτική Παραγωγή", 2, "Ε",reference2],
  ["ΒΓ", "Ζωική Παραγωγή", 2, "Θ",reference2],
  ["ΒΓ", "Ζωική Παραγωγή", 2, "Ε",reference2],
  ["ΒΓ", "Τεχνολογία Τροφίμων", 2, "Θ",reference2],
  ["ΒΓ", "Τεχνολογία Τροφίμων", 2, "Ε",reference2],
  ["ΒΓ", "Αρχές Αρχιτεκτονικής Τοπίου", 1, "Θ",reference2],
  ["ΒΓ", "Αρχές Αρχιτεκτονικής Τοπίου", 1, "Ε",reference2],
  ["ΒΓ", "Στοιχεία Γεωργικών Εγκαταστάσεων και Γεωργικά Μηχανήματα", 2, "Θ",reference2],
  ["ΒΓ", "Στοιχεία Γεωργικών Εγκαταστάσεων και Γεωργικά Μηχανήματα", 1, "Ε",reference2],
  ["ΒΓ", "Αγγλικά Τομέα", 1, "Θ",reference2],
  ["ΒΟΙΚ", "Αρχές Λογιστικής", 3, "Θ",reference2],
  ["ΒΟΙΚ", "Αρχές Λογιστικής", 3, "Ε",reference2],
  ["ΒΟΙΚ", "Εισαγωγή στο Μάρκετινγκ", 2, "Θ",reference2],
  ["ΒΟΙΚ", "Θεωρία Τουρισμού και Εφαρμογές", 3, "Ε",reference2],
  ["ΒΟΙΚ", "Εισαγωγή στην Εφοδιαστική", 2, "Θ",reference2],
  ["ΒΟΙΚ", "Χρηματοπιστωτικές Συναλλαγές-Λογιστικά Φύλλα", 2, "Ε",reference2],
  ["ΒΟΙΚ", "Στοιχεία Δικαίου", 4, "Θ",reference2],
  ["ΒΟΙΚ", "Οικονομικά Μαθηματικά και Στατιστική", 2, "Θ",reference2],
  ["ΒΟΙΚ", "Αγγλικά Τομέα", 2, "Θ",reference2],
  ["ΒΜ", "Στοιχεία Τεχνικής Θερμοδυναμικής - Εφαρμογές", 3, "Θ",reference2],
  ["ΒΜ", "Στοιχεία Τεχνικής Θερμοδυναμικής - Εφαρμογές", 3, "Ε",reference2],
  ["ΒΜ", "Μηχανική Αντοχή Υλικών", 2, "Θ",reference2],
  ["ΒΜ", "Σχεδιασμός και Περιγραφή Στοιχείων Μηχανών", 3, "Ε",reference2],
  ["ΒΜ", "Τεχνολογία Μηχανολογικών Κατασκευών - Εφαρμογές", 2, "Θ",reference2],
  ["ΒΜ", "Τεχνολογία Μηχανολογικών Κατασκευών - Εφαρμογές", 5, "Ε",reference2],
  ["ΒΜ", "Βασική Ηλεκτρολογία και Εφαρμογές", 2, "Θ",reference2],
  ["ΒΜ", "Βασική Ηλεκτρολογία και Εφαρμογές", 2, "Ε",reference2],
  ["ΒΜ", "Αγγλικά Τομέα", 1, "Θ",reference2],
  ["ΒΠ", "Αρχές Προγραμματισμού Υπολογιστών", 1, "Θ",reference2],
  ["ΒΠ", "Αρχές Προγραμματισμού Υπολογιστών", 3, "Ε",reference2],
  ["ΒΠ", "Υλικό και Δίκτυα Υπολογιστών", 2, "Θ",reference2],
  ["ΒΠ", "Υλικό και Δίκτυα Υπολογιστών", 2, "Ε",reference2],
  ["ΒΠ", "Βασικά Θέματα Πληροφορικής", 2, "Θ",reference2],
  ["ΒΠ", "Βασικά Θέματα Πληροφορικής", 2, "Ε",reference2],
  ["ΒΠ", "Λειτουργικά Συστήματα και Ασφάλεια Πληροφοριακών Συστημάτων", 1, "Θ",reference2],
  ["ΒΠ", "Λειτουργικά Συστήματα και Ασφάλεια Πληροφοριακών Συστημάτων", 2, "Ε",reference2],
  ["ΒΠ", "Σχεδιασμός και Ανάπτυξη Ιστοτόπων", 4, "Ε",reference2],
  ["ΒΠ", "Τεχνικά Θέματα Πωλήσεων και Προδιαγραφών Υλικού και Λογισμικού", 1, "Θ",reference2],
  ["ΒΠ", "Τεχνικά Θέματα Πωλήσεων και Προδιαγραφών Υλικού και Λογισμικού", 2, "Ε",reference2],
  ["ΒΠ", "Αγγλικά Τομέα", 1, "Θ",reference2],
  ["ΒΥ", "Ανατομία - Φυσιολογία", 3, "Θ",reference2],
  ["ΒΥ", "Πρώτες Βοήθειες", 2, "Ε",reference2],
  ["ΒΥ", "Υγιεινή", 2, "Θ",reference2],
  ["ΒΥ", "Διαπροσωπικές Σχέσεις", 2, "Θ",reference2],
  ["ΒΥ", "Εργασιακό Περιβάλλον Τομέα", 2, "Ε",reference2],
  ["ΒΥ", "Αγγλικά Τομέα", 2, "Θ",reference2],
  ["ΒΥ", "Νοσηλευτική", 1, "Θ",reference2],
  ["ΒΥ", "Νοσηλευτική", 4, "Ε",reference2],
  ["ΒΥ", "Μικροβιολογία", 1, "Θ",reference2],
  ["ΒΥ", "Μικροβιολογία", 4, "Ε",reference2],
  ["Γ", "Νέα Ελληνικά", 3, "Θ",reference3],
  ["Γ", "Άλγεβρα", 2, "Θ",reference3],
  ["Γ", "Γεωμετρία", 1, "Θ",reference3],
  ["Γ", "Φυσική", 2, "Θ",reference3],
  ["Γ", "Χημεία", 1, "Θ",reference3],
  ["Γ", "Αγγλικά", 1, "Θ",reference3],
  ["Γ", "Φυσική Αγωγή", 1, "Θ",reference3],
  ["Γ", "Εισαγωγή στις Αρχές της Επιστήμης των Η/Υ", 1, "Θ",reference3],
  ["ΓΦΠ", "Σύγχρονες Γεωργικές Επιχειρήσεις", 3, "Θ",reference3],
  ["ΓΦΠ", "Αρχές Βιολογικής Γεωργίας", 3, "Θ",reference3],
  ["ΓΦΠ", "Δενδροκομία - Αμπελουργία", 2, "Θ",reference3],
  ["ΓΦΠ", "Δενδροκομία - Αμπελουργία", 3, "Ε",reference3],
  ["ΓΦΠ", "Φυτά Μεγάλης Καλλιέργειας", 2, "Θ",reference3],
  ["ΓΦΠ", "Φυτά Μεγάλης Καλλιέργειας", 2, "Ε",reference3],
  ["ΓΦΠ", "Κηπευτικές Καλλιέργειες - Αρδεύσεις", 2, "Θ",reference3],
  ["ΓΦΠ", "Κηπευτικές Καλλιέργειες - Αρδεύσεις", 3, "Ε",reference3],
  ["ΓΦΠ", "Φυτοπροστασία", 2, "Θ",reference3],
  ["ΓΦΠ", "Φυτοπροστασία", 1, "Ε",reference3],
  ["ΓΤΤ", "Σύγχρονες Γεωργικές Επιχειρήσεις", 3, "Θ",reference3],
  ["ΓΤΤ", "Αρχές Βιολογικής Γεωργίας", 3, "Θ",reference3],
  ["ΓΤΤ", "Αρχές Επεξεργασίας Τροφίμων", 2, "Θ",reference3],
  ["ΓΤΤ", "Αρχές Επεξεργασίας Τροφίμων", 2, "Ε",reference3],
  ["ΓΤΤ", "Μεταποίηση Φυτικών Προϊόντων", 2, "Θ",reference3],
  ["ΓΤΤ", "Μεταποίηση Φυτικών Προϊόντων", 3, "Ε",reference3],
  ["ΓΤΤ", "Μεταποίηση Ζωικών Προϊόντων", 2, "Θ",reference3],
  ["ΓΤΤ", "Μεταποίηση Ζωικών Προϊόντων", 3, "Ε",reference3],
  ["ΓΤΤ", "Ασφάλεια Τροφίμων", 2, "Θ",reference3],
  ["ΓΤΤ", "Ασφάλεια Τροφίμων", 1, "Ε",reference3],
  ["ΓΟΙΚ", "Αρχές Οικονομικής Θεωρίας", 3, "Θ",reference3],
  ["ΓΟΙΚ", "Αρχές Οργάνωσης και Διοίκησης", 3, "Θ",reference3],
  ["ΓΟΙΚ", "Σύγχρονο Περιβάλλον Γραφείου", 2, "Θ",reference3],
  ["ΓΟΙΚ", "Σύγχρονο Περιβάλλον Γραφείου", 2, "Ε",reference3],
  ["ΓΟΙΚ", "Φορολογική Πρακτική", 2, "Θ",reference3],
  ["ΓΟΙΚ", "Φορολογική Πρακτική", 4, "Ε",reference3],
  ["ΓΟΙΚ", "Λογιστικές Εφαρμογές", 5, "Ε",reference3],
  ["ΓΟΙΚ", "Επικοινωνία και Δημόσιες Σχέσεις", 2, "Θ",reference3],
  ["ΓΗΝ", "Ψηφιακά Συστήματα", 3, "Θ",reference3],
  ["ΓΗΝ", "Δίκτυα Υπολογιστών", 3, "Θ",reference3],
  ["ΓΗΝ", "Εφαρμοσμένα Ηλεκτρονικά - Κατασκευές", 2, "Ε",reference3],
  ["ΓΗΝ", "Εγκατάσταση και Διαχείριση Δικτύων - Συντήρηση Υπολογιστικών Συστημάτων", 3, "Ε",reference3],
  ["ΓΗΝ", "Συστήματα Ελέγχου και Ασφάλειας", 2, "Ε",reference3],
  ["ΓΗΝ", "Τηλεπικοινωνίες - Τηλεματική", 3, "Θ",reference3],
  ["ΓΗΝ", "Τηλεπικοινωνίες - Τηλεματική", 2, "Ε",reference3],
  ["ΓΗΝ", "Ρομποτική", 3, "Ε",reference3],
  ["ΓΗΝ", "Επεξεργασία Σήματος Ήχου και Εικόνας", 2, "Ε",reference3],
  ["ΓΜΚ", "Στοιχεία Μηχανών", 3, "Θ",reference3],
  ["ΓΜΚ", "Στοιχεία Σχεδιασμού Κεντρικών Θερμάνσεων", 3, "Θ",reference3],
  ["ΓΜΚ", "Μηχανουργική Τεχνολογία - Εργαλειομηχανές", 2, "Θ",reference3],
  ["ΓΜΚ", "Μηχανουργική Τεχνολογία - Εργαλειομηχανές", 6, "Ε",reference3],
  ["ΓΜΚ", "Ανελκυστήρες - Ανυψωτικές Μηχανές ", 2, "Θ",reference3],
  ["ΓΜΚ", "Στοιχεία Ψύξης - Κλιματισμού", 2, "Θ",reference3],
  ["ΓΜΚ", "Στοιχεία Ψύξης - Κλιματισμού", 5, "Ε",reference3],
  ["ΓΟΧ", "Στοιχεία Μηχανών", 3, "Θ",reference3],
  ["ΓΟΧ", "Μηχανές Εσωτερικής Καύσης ΙΙ", 3, "Θ",reference3],
  ["ΓΟΧ", "Μηχανές Εσωτερικής Καύσης ΙΙ", 4, "Ε",reference3],
  ["ΓΟΧ", "Συστήματα Αυτοκινήτου", 3, "Θ",reference3],
  ["ΓΟΧ", "Συστήματα Αυτοκινήτου", 4, "Ε",reference3],
  ["ΓΟΧ", "Τεχνολογία Ελέγχων και Διαγνώσεων", 2, "Θ",reference3],
  ["ΓΟΧ", "Τεχνολογία Ελέγχων και Διαγνώσεων", 4, "Ε",reference3],
  ["ΓΠ", "Προγραμματισμός Υπολογιστών", 3, "Θ",reference3],
  ["ΓΠ", "Δίκτυα Υπολογιστών", 3, "Θ",reference3],
  ["ΓΠ", "Προγραμματισμός Υπολογιστών", 2, "Ε",reference3],
  ["ΓΠ", "Δίκτυα Υπολογιστών", 2, "Ε",reference3],
  ["ΓΠ", "Πληροφοριακά Συστήματα σε Επιχειρήσεις και Οργανισμούς", 2, "Θ",reference3],
  ["ΓΠ", "Συστήματα Διαχείρισης Βάσεων Δεδομένων και Εφαρμογές στο Διαδίκτυο", 4, "Ε",reference3],
  ["ΓΠ", "Ειδικά Θέματα στον Προγραμματισμό Υπολογιστών", 4, "Ε",reference3],
  ["ΓΠ", "Σχεδιασμός και Ανάπτυξη Διαδικτυακών Εφαρμογών", 3, "Ε",reference3],
  ["ΓΥ", "Ανατομία-Φυσιολογία II", 3, "Θ",reference3],
  ["ΓΥ", "Υγιεινή", 2, "Θ",reference3],
  ["ΓΥ", "Νοσηλευτική ΙΙ", 2, "Θ",reference3],
  ["ΓΥ", "Νοσηλευτική ΙΙ", 10, "Ε",reference3],
  ["ΓΥ", "Στοιχεία Παθολογίας", 2, "Θ",reference3],
  ["ΓΥ", "Χειρουργική - Τεχνική Χειρουργείου", 2, "Ε",reference3],
  ["ΓΥ", "Στοιχεία Μαιευτικής - Γυναικολογίας", 2, "Θ",reference3],
]

school_grade_specialties = {}
lessons.each do |lesson|
  if lesson.length != 5
    puts lesson
    raise "Error!"
  end
  p lesson
  school_grade_specialties[ lesson[0] ] ||= 0
  school_grade_specialties[ lesson[0] ] += lesson[2]
  raise "Not found lesson type for #{lesson[1]}" if not LessonType.find_by( code: lesson[3] ) 
end

lessons.each do |lesson|
  puts lesson[0] + "_" + create_abbr(lesson[1])+"_"+lesson[3]
end

school_grade_specialties.each do |k, v|
  puts "#{k} has #{v} hours"
  raise "Not found #{k}" if not SchoolGradeSpecialty.find_by( code: k )
end

puts "Hit enter to continue."
gets

lessons.each do |lesson|
  school_grade_specialty = SchoolGradeSpecialty.find_by( code: lesson[0] )
  lesson_type = LessonType.find_by( code: lesson[3] )
  description = lesson[1]
  abbr = create_abbr description
  abbr = lesson[0] + "_" + abbr +"_" + lesson[3]
  hours = lesson[2]
  begin
    Lesson.create( abbr: abbr,
                  description: description, 
                  hours: lesson[2],
                  school_grade_specialty: school_grade_specialty, 
                  lesson_type: lesson_type,
                  reference: lesson[4] )
  rescue ActiveRecord::RecordNotUnique => e
    puts "Lesson #{abbr} already exists."
  end
end

#2remove
  #["ΓΦΠ", "Σύγχρονες Γεωργικές Επιχειρήσεις", 3, "Θ",reference3],
  #["ΓΦΠ", "Αρχές Βιολογικής Γεωργίας", 3, "Θ",reference3],
  #["ΓΦΠ", "Δενδροκομία - Αμπελουργία", 2, "Θ",reference3],
  #["ΓΦΠ", "Δενδροκομία - Αμπελουργία", 3, "Ε",reference3],
  #["ΓΦΠ", "Φυτά Μεγάλης Καλλιέργειας", 2, "Θ",reference3],
  #["ΓΦΠ", "Φυτά Μεγάλης Καλλιέργειας", 2, "Ε",reference3],
  #["ΓΦΠ", "Κηπευτικές Καλλιέργειες - Αρδεύσεις", 2, "Θ",reference3],
  #["ΓΦΠ", "Κηπευτικές Καλλιέργειες - Αρδεύσεις", 3, "Ε",reference3],
  #["ΓΦΠ", "Φυτοπροστασία", 2, "Θ",reference3],
  #["ΓΦΠ", "Φυτοπροστασία", 1, "Ε",reference3],
#2add
  #["ΓΦΠ", "Σύγχρονες Γεωργικές Επιχειρήσεις", 3, "Θ",reference4],
  #["ΓΦΠ", "Αρχές Βιολογικής Γεωργίας", 3, "Θ",reference4],
  #["ΓΦΠ", "Δενδροκομία - Αμπελουργία", 2, "Θ",reference4],
  #["ΓΦΠ", "Δενδροκομία - Αμπελουργία", 3, "Ε",reference4],
  #["ΓΦΠ", "Φυτά Μεγάλης Καλλιέργειας-Κηπευτικές Καλλιέργειες", 2, "Θ",reference4],
  #["ΓΦΠ", "Φυτά Μεγάλης Καλλιέργειας-Κηπευτικές Καλλιέργειες", 3, "Ε",reference4],
  #["ΓΦΠ", "Αρδεύσεις Καλλιεργειών", 1, "Θ",reference4],
  #["ΓΦΠ", "Αρδεύσεις Καλλιεργειών", 2, "Ε",reference4],
  #["ΓΦΠ", "Φυτοπροστασία", 2, "Θ",reference3],
  #["ΓΦΠ", "Φυτοπροστασία", 2, "Ε",reference3],



  


